<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BÃ“RáºžÃ•Ã‘ Chat</title>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<style>

body{
margin:0;
font-family:sans-serif;
background:#e5ddd5;
}

/* Header */
.header{
background:#008069;
color:white;
padding:12px;
font-size:18px;
}

/* Chat */
#chat-container{
height:calc(100vh - 130px);
overflow-y:auto;
padding:10px;
display:flex;
flex-direction:column;
gap:6px;
padding-bottom:90px;
}

/* Message */
.msg{
max-width:75%;
padding:8px 10px;
border-radius:8px;
font-size:14px;
}

.sent{
background:#dcf8c6;
align-self:flex-end;
}

.received{
background:white;
align-self:flex-start;
}

/* Input Fix */
.input-area{
position:fixed;
bottom:0;
left:0;
width:100%;
display:flex;
gap:8px;
background:#f0f0f0;
padding:10px;
}

.input-area input{
flex:1;
padding:12px;
font-size:16px;
border-radius:20px;
border:none;
}

.send-btn{
background:#008069;
color:white;
border:none;
padding:10px 15px;
border-radius:50%;
font-size:18px;
}

</style>
</head>

<body>

<div class="header">BÃ“RáºžÃ•Ã‘ Chat Support</div>

<div id="chat-container"></div>

<div class="input-area">
<input id="msgInput" placeholder="à¦®à§‡à¦¸à§‡à¦œ à¦²à¦¿à¦–à§à¦¨...">
<button class="send-btn" onclick="sendMessage()">âž¤</button>
</div>

<script>

/* Firebase Config */
const firebaseConfig={
apiKey:"YOUR_API_KEY",
authDomain:"YOUR_DOMAIN",
databaseURL:"YOUR_DB",
projectId:"YOUR_ID",
storageBucket:"YOUR_BUCKET",
messagingSenderId:"YOUR_MSG",
appId:"YOUR_APP"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

/* Variables */
let myName="";
let myID="";
let isAdmin=false;
let currentChatUser=null;

/* Login */
function startLogin(){

const name=prompt("à¦¤à§‹à¦®à¦¾à¦° à¦¨à¦¾à¦® à¦¦à¦¾à¦“");
const pass=prompt("Password à¦¦à¦¾à¦“ ðŸ”‘");

if(!name||!pass) return;

myName=name;

/* Admin */
if(name==="borson_admin" && pass==="1234"){
isAdmin=true;
alert("Admin Login Success");
loadAdminUsers();
return;
}

/* Check user */
db.ref("users").once("value",(snap)=>{

let found=false;

snap.forEach((child)=>{

const data=child.val();

if(data.name===name){

found=true;

if(data.password===pass){

myID=child.key;
loadMessages(myID);

}else{
alert("Password à¦­à§à¦² âŒ");
}

}

});

/* New user */
if(!found){

myID="user_"+Date.now();

db.ref("users/"+myID).set({
name:name,
password:pass
});

loadMessages(myID);

}

});

}

/* Load Messages */
function loadMessages(id){

db.ref("messages/"+id).limitToLast(50)
.on("child_added",(snap)=>{

const data=snap.val();

const div=document.createElement("div");
div.className="msg "+(data.sender===myName?"sent":"received");

div.innerText=data.text;

document.getElementById("chat-container").appendChild(div);

document.getElementById("chat-container").scrollTop=
document.getElementById("chat-container").scrollHeight;

});

}

/* Send */
function sendMessage(){

const text=document.getElementById("msgInput").value.trim();

if(!text) return;

const target=isAdmin?currentChatUser:myID;

db.ref("messages/"+target).push({
text:text,
sender:isAdmin?"Admin":myName,
time:Date.now()
});

document.getElementById("msgInput").value="";

}

/* Admin User List */
function loadAdminUsers(){

db.ref("users").on("value",(snap)=>{

const box=document.getElementById("chat-container");
box.innerHTML="";

snap.forEach((child)=>{

const data=child.val();
const uid=child.key;

const div=document.createElement("div");
div.className="msg received";
div.innerText=data.name;

div.onclick=()=>{
currentChatUser=uid;
box.innerHTML="";
loadMessages(uid);
};

box.appendChild(div);

});

});

}

/* Start */
startLogin();

</script>
</body>
</html>
